# Задача #3
## Вариант: 1
## Баллы: 2 + 1 + 2
## Условие:

Давным-давно, в одной далекой галактике молодая **галактическая империя** планомерно уничтожала силы восстания,
чтобы укрепить свою власть. Казалось бы, у нее для этого были все ресурсы: армии штурмовиков, мощный флот звездных
разрушителей и даже звезда смерти, которая может уничтожать целые планеты!

Но были и проблемы:

1. Галактика очень большая, в ней тысячи населенных планет. Нужно понять, куда именно отправлять штурмовиков,
2. Повстанцы славятся своей мобильностью, если промедлить, они сбегут у вас из-под носа и тут же организуют базу на другом конце галактики.

Вы служите младшим техником на звездном разрушителе Дарта Вейдера, и он лично дал вам ответственное задание,
которое поможет, наконец, задавить ненавистное восстание.

Вам необходимо разработать терминал, который принимает сообщения от шпионов и боевые сводки, а по запросу возвращает 
информацию: есть ли на указанной планете базы повстанцев, и если да, то сколько?

Входная информация может иметь следующий вид:

1. Донесение шпиона о том, что на планете нашли новую базу повстанцев,
2. Отчет штурмовиков о том, что на планете уничтожили (одну) базу повстанцев,
3. Отчет космофлота о том, что планету взорвали звездой смерти (там было слишком много баз повстанцев).

Темный лорд сообщил вам и свои требования к реализации терминала. Они делятся на базовую часть требований и две модернизации.

Требования к **базовой части** (их выполнение принесет вам **2 балла**, а нарушение - неизбежную смерть от лазерного меча владыки):

1. В среднем терминал должен работать моментально, но редки просадки производительности возможны, хоть они и раздражают повелителя,
2. Память терминала - это очень дорогой ресурс, который стоит экономить (ведь вам и так придется потратить память, чтобы добиться разреженности массива, лучше не усугублять ситуацию). Например, при уничтожении планеты звездой смерти не должно оставаться никаких записей о ней, чтобы не тратилась лишняя память,
3. Дарт Вейдер не потерпит использования существующих в различных стандартных библиотеках словарей. Их написали еще во времена республики, а значит их использование - это потенциальная проблема безопасности,
4. Имперцы поддерживают строгую иерархию и упорядоченность, поэтому было принято решения для разрешения коллизий использовать **метод цепочек**.

**Первая модернизация** (принесет вам еще **1 балл**): последнее время участились случаи диверсий со стороны повстанцев. Они разгадывают
наши хеш-функции, после чего перегружают терминал с помощью pathological data set. Это неприемлемо! Решите проблему как можно быстрее
с помощью [универсального хеширования строк](https://en.wikipedia.org/wiki/Universal_hashing#Hashing_strings).

**Вторая модернизация** (принесет вам еще **2 балл**): темного лорда беспокоит потенциальная опасность (пусть и случайного характера), в которой
образуется цепочка слишком большой длины. Чтобы эту проблему адресовать предлагается ввести пороговое значение для такой длины, после достижения
которого связный список в соответствующей ячейка заменяется на сбалансированное дерево. Пороговое значение - часть настройки терминала, т.е. 
задается при его создании.

Не подведите темного лорда, иначе в гневе он разрубит вас своим световым мечом, как уже много раз поступал с вашими предшественниками.

![в открытом бою с империей было не справиться](./pictures/empire.jpg)

## Формат входных и выходных данных:
На вход вам дается список боевых донесений и запросов, которые необходимо последовательно выполнить, записывая в выходной файл результат запросов.

Формат команд:

1. Located rebel base on \<PLANET NAME\> -- добавляет информацию об очередной базе на указанной планете,
2. \<PLANET NAME\> invaded -- штурмовики вторглись на планету и уничтожили очередную базу повстанцев,
3. \<PLANET NAME\> destroyed -- звезда смерти уничтожила планету.

В ответ на любую команду, система выдает "Roger that"

Система поддерживает единственный тип запросов:

1. Rebel bases on \<PLANET NAME\> -- возвращает текущее количество баз на планете "Bases on \<PLANET NAME\>: \<NUMBER OF BASES\>". Если баз нет или самой планеты уже нет, вместо \<NUMBER OF BASES\> вернет 0;


## Пример входных и выходных данных:

| input                                                                                                                                                                                                                                                                                                                                                                                       | output                                                                                                                                                                                                                                       |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|   
| Located rebel base on Naboo <br/>  Naboo invaded <br/> Located rebel base on Tatooine <br/> Located rebel base on Tatooine <br/> Located rebel base on Alderaan <br/> Rebel bases on Tatooine <br/> Rebel bases on Naboo <br/> Rebel bases on Alderaan <br/> Alderaan destroyed <br/> Rebel bases on Alderaan                                                                               | Roger that<br/> Roger that<br/> Roger that<br/> Roger that<br/> Roger that <br/> Bases on Tatooine: 2<br/> Bases on Naboo: 0 <br/> Bases on Alderaan: 1 <br/> Roger that<br/> Bases on Alderaan: 0                                           |
|||
| Located rebel base on Coruscant <br/>  Located rebel base on Coruscant <br/> Located rebel base on Coruscant <br/> Located rebel base on Coruscant <br/> Located rebel base on Coruscant <br/> Rebel bases on Coruscant <br/> Coruscant invaded <br/> Coruscant invaded <br/> Rebel bases on Coruscant <br/> Coruscant destroyed <br/>Rebel bases on Coruscant <br/> Rebel bases on Alderaan | Roger that<br/> Roger that<br/> Roger that<br/> Roger that<br/> Roger that <br/> Bases on Coruscant: 5<br/>Roger that <br/> Roger that <br/> Bases on Coruscant: 3<br/> Roger that <br/>  Bases on Coruscant: 0 <br/>  Bases on Alderaan: 0 |


## Система тестирования:
Для прохождения автоматических тестов вам нужно адаптировать **Makefile** в репозитории под свои нужды в зависимости от того,
какой язык вы используете для решения задачи. Для этого нужно обновить значение переменной **RUNNABLE**, указав там то,
что будет запускаться для тестирования. И при необходимости добавить шаги по сборке вашего решения.

В закомментированной части **Makefile** вы можете увидеть два примера: для языков Python и C.